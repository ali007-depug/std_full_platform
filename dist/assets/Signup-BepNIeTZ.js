import{r,a as A,b as I,e as g,k as M,j as e,L as $,l as D,m as z,f as q}from"./index-Cy3cA8Gh.js";import{I as n}from"./iconBase-BU23cjlB.js";import{P as O}from"./PopupError-D_xzBCjo.js";import{F as R,a as T}from"./index-Dq8sGD8U.js";function H(){const[d,f]=r.useState(!1),[s,i]=r.useState({fName:"",lName:"",email:"",password:""}),[c,w]=r.useState({emailValid:!1,passwordValid:!1}),[u,p]=r.useState(!1),[b,t]=r.useState(!1),[j,o]=r.useState(""),y=s.fName+" "+s.lName,v=A(),m=I(g),N=M(g),S=()=>{f(a=>!a)},E=()=>{t(!1)},C=a=>{i({...s,fName:a})},P=a=>{i({...s,lName:a})},V=a=>{i({...s,email:a})},F=a=>{i({...s,password:a})},k=async a=>{a.preventDefault();const x=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email),h=/[!@#$%^&*(),.?":{}|<>]/.test(s.password);if(w({emailValid:x,passwordValid:h}),navigator.onLine){if(x&&h){p(!0);try{const L=(await D(m,s.email,s.password)).user;await z(q(N,"pending-users",L.uid),{name:y,email:s.email,createdAt:new Date}),await m.signOut(),t(!0),o("تم استلام البيانات، سيتم تنشيط الحساب لاحقاً"),setTimeout(()=>{v("/login")},3e3)}catch(l){console.log(`signup error : ${l}`),l.code==="auth/email-already-in-use"?(t(!0),o("هذا البريد تم التسجيل به من قبل")):l.code==="auth/invalid-email"?(t(!0),o("هذا البريد غير صالح")):l.code==="auth/network-request-failed"&&(t(!0),o("فشل الإتصال بالشبكة"))}finally{p(!1)}}}else t(!0),o("عذراً لا يوجد اتصال بالانترنت")};return e.jsxs("div",{className:"signup px-5 pt-10 pb-5 rounded flex flex-col gap-5 items-center bg-cyan-500 w-[min(98%,550px)]  absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 [direction:rtl]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mb-5 text-title-color",children:"أدمن جديد"}),e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(n,{type:"text",value:s.fName,onChange:C,label:"الاسم الأول"}),e.jsx(n,{type:"text",value:s.lName,onChange:P,label:"الاسم الثاني"})]}),e.jsx(n,{id:"email",label:"البريد الإكتروني",type:"email",value:s.email,onChange:V,error:c.emailValid,errorMsg:"الرجاء كتابة بريد الكتروني صالح"}),e.jsxs(n,{id:"passowrd",type:d?"text":"password",value:s.password,label:"كلمة المرور",onChange:F,error:c.passwordValid,errorMsg:" كلمة المرور التي أدخلتها غير صالحة",children:[e.jsx("div",{className:"absolute left-2 top-3 cursor-pointer",onClick:S,children:d?e.jsx(R,{size:20}):e.jsx(T,{size:20})}),e.jsxs("div",{className:"text-sm text-gray-900 self-start",children:[e.jsx("p",{children:"*يجب أن تكون كلمة السر أكثر من 12 حرف"}),e.jsx("p",{children:"*يجب أن تحتوي كلمة السر على :"}),e.jsx("ul",{children:e.jsx("li",{children:"رموز خاصة مثل @-#-!-?"})})]})]}),e.jsx("button",{type:"submit",disabled:u,className:`bg-gray-500 text-white hover:text-bg2-color hover:bg-p-color/80 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold ${u&&"opacity-50"}`,children:"تسجيل"})]}),e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx("p",{children:"هل لديك حساب مسبقاً ؟"}),e.jsx($,{to:"/login",children:e.jsx("button",{className:"bg-gray-700 text-black hover:text-white hover:bg-gray-950 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer",children:"تسجيل دخول"})})]}),b&&e.jsx(O,{closePopupError:E,msg:j})]})}export{H as default};
