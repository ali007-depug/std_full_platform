import{r,a as C,b as L,e as k,j as e,L as D,s as I,f as M,d as F,h as U,i as z}from"./index-Cy3cA8Gh.js";import{P as A}from"./PopupError-D_xzBCjo.js";import{I as h}from"./iconBase-BU23cjlB.js";import{F as R,a as V}from"./index-Dq8sGD8U.js";function G(){const[s,n]=r.useState({userEmail:"",userPassword:""}),[i,x]=r.useState(!1),[g,m]=r.useState(!1),[u,d]=r.useState(!1),[f,o]=r.useState(""),[w,t]=r.useState(!1),b=C(),c=L(k),y=()=>{t(!1)},v=a=>{n({...s,userEmail:a})},E=a=>{n({...s,userPassword:a})},j=()=>{x(a=>!a)},S=async a=>{a.preventDefault();const p=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.userEmail);if(m(p),navigator.onLine){if(p){console.log("login..."),d(!0);try{const P=(await I(c,s.userEmail,s.userPassword)).user,N=M(F,"users",P.uid);(await U(N)).exists()?b("/dashboard"):(await z(c),t(!0),o("هذا البريد قيد التأكيد"))}catch(l){l.code==="auth/user-not-found"?(t(!0),o("عذراً هذا المتسخدم غير موجود")):l.code==="auth/wrong-password"?(t(!0),o("كلمة  السر التي أدخلتها غير صحيحة")):l.code==="auth/invalid-credential"?(t(!0),o("البريد الإلكتروني غير صحيح أو كلمة المرور غير صحيحة")):l.code==="auth/network-request-failed"&&(t(!0),o("فشل الإتصال بالشبكة، حاول مجدداً"))}finally{d(!1)}}}else t(!0),o("الرجاء الإتصال بالإنترنت أولاً")};return e.jsxs("div",{className:"login px-5 py-10 rounded  flex flex-col gap-5 items-center bg-sky-500 w-[min(98%,450px)] absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 [direction:rtl]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mb-5 text-title-color",children:"تسجيل دخول"}),e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-5 w-full ",children:[e.jsx(h,{id:"email",label:"البريد الإكتروني",type:"email",value:s.userEmail,onChange:v,error:g,errorMsg:"الرجاء كتابة بريد الكتروني صالح",customStyle:"text-center"}),e.jsx(h,{id:"passowrd",type:i?"text":"password",value:s.userPassword,label:"كلمة المرور",onChange:E,errorMsg:"كلمة المرور التي أدخلتها غير صالحة",customStyle:"text-center",children:e.jsx("div",{className:"absolute left-2 top-2 cursor-pointer",onClick:j,children:i?e.jsx(R,{size:25}):e.jsx(V,{size:25})})}),e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsx("button",{type:"submit",disabled:u,className:`bg-gray-500 text-white hover:text-bg2-color hover:bg-p-color/80 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold ${u&&"opacity-50"}`,children:"تسجيل دخول"}),e.jsx(D,{to:"/signup",children:e.jsx("button",{className:"bg-white text-gray-800 hover:text-white hover:bg-gray-950 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold",children:"تسجيل جديد"})})]})]}),w&&e.jsx(A,{closePopupError:y,msg:f})]})}export{G as default};
