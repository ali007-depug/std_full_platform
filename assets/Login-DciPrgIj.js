import{r as n,a as M,j as e,L as O,_ as h,g as R,b as V}from"./index-BK7b6sh-.js";import{P as F}from"./PopupError-5Abf3F08.js";import{I as f}from"./iconBase-BWzcDgqo.js";import{F as U,a as z}from"./index-DeGAqejc.js";import{d as T,b as W}from"./firebase-BHdF2iRg.js";import"./react-Csw2ODfV.js";function X(){const[t,u]=n.useState({userEmail:"",userPassword:""}),[c,x]=n.useState(!1),[w,b]=n.useState(!1),[d,p]=n.useState(!1),[y,o]=n.useState(""),[E,s]=n.useState(!1),v=M(),P=()=>{s(!1)},j=a=>{u({...t,userEmail:a})},S=a=>{u({...t,userPassword:a})},_=()=>{x(a=>!a)},L=async a=>{a.preventDefault();const m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.userEmail);if(b(m),navigator.onLine){if(m){console.log("login..."),p(!0);try{const{getAuth:r}=await h(async()=>{const{getAuth:i}=await import("./firebase-BHdF2iRg.js").then(l=>l.f);return{getAuth:i}},[]),{signInWithEmailAndPassword:N,signOut:C}=await h(async()=>{const{signInWithEmailAndPassword:i,signOut:l}=await import("./firebase-BHdF2iRg.js").then(k=>k.f);return{signInWithEmailAndPassword:i,signOut:l}},[]),D=await R(),g=r(V),I=(await N(g,t.userEmail,t.userPassword)).user,A=T(D,"users",I.uid);(await W(A)).exists()?v("/dashboard"):(await C(g),s(!0),o("هذا البريد قيد التأكيد"))}catch(r){r.code==="auth/user-not-found"?(s(!0),o("عذراً هذا المتسخدم غير موجود")):r.code==="auth/wrong-password"?(s(!0),o("كلمة  السر التي أدخلتها غير صحيحة")):r.code==="auth/invalid-credential"?(s(!0),o("البريد الإلكتروني غير صحيح أو كلمة المرور غير صحيحة")):r.code==="auth/network-request-failed"&&(s(!0),o("فشل الإتصال بالشبكة، حاول مجدداً"))}finally{p(!1)}}}else s(!0),o("الرجاء الإتصال بالإنترنت أولاً")};return e.jsxs("div",{className:"login px-5 py-10 rounded  flex flex-col gap-5 items-center bg-sky-500 w-[min(98%,450px)] absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 [direction:rtl]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mb-5 text-title-color",children:"تسجيل دخول"}),e.jsxs("form",{onSubmit:L,className:"flex flex-col gap-5 w-full ",children:[e.jsx(f,{id:"email",label:"البريد الإكتروني",type:"email",value:t.userEmail,onChange:j,error:w,errorMsg:"الرجاء كتابة بريد الكتروني صالح",customStyle:"text-center"}),e.jsx(f,{id:"passowrd",type:c?"text":"password",value:t.userPassword,label:"كلمة المرور",onChange:S,errorMsg:"كلمة المرور التي أدخلتها غير صالحة",customStyle:"text-center",children:e.jsx("div",{className:"absolute left-2 top-2 cursor-pointer",onClick:_,children:c?e.jsx(U,{size:25}):e.jsx(z,{size:25})})}),e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsx("button",{type:"submit",disabled:d,className:`bg-gray-500 text-white hover:text-bg2-color hover:bg-p-color/80 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold ${d&&"opacity-50"}`,children:"تسجيل دخول"}),e.jsx(O,{to:"/signup",children:e.jsx("button",{className:"bg-white text-gray-800 hover:text-white hover:bg-gray-950 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold",children:"تسجيل جديد"})})]})]}),E&&e.jsx(F,{closePopupError:P,msg:y})]})}export{X as default};
