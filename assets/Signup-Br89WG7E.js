import{r as o,a as R,j as e,L as T,_ as u,b as $,g as z}from"./index-BK7b6sh-.js";import{I as c}from"./iconBase-BWzcDgqo.js";import{P as U}from"./PopupError-5Abf3F08.js";import{F as W,a as q}from"./index-DeGAqejc.js";import"./react-Csw2ODfV.js";import"./firebase-BHdF2iRg.js";function Y(){const[p,b]=o.useState(!1),[a,d]=o.useState({fName:"",lName:"",email:"",password:""}),[m,j]=o.useState({emailValid:!1,passwordValid:!1}),[h,x]=o.useState(!1),[v,s]=o.useState(!1),[y,i]=o.useState(""),E=a.fName+" "+a.lName,N=R(),_=()=>{b(t=>!t)},P=()=>{s(!1)},S=t=>{d({...a,fName:t})},V=t=>{d({...a,lName:t})},C=t=>{d({...a,email:t})},A=t=>{d({...a,password:t})},D=async t=>{t.preventDefault();const g=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email),f=/[!@#$%^&*(),.?":{}|<>]/.test(a.password);if(j({emailValid:g,passwordValid:f}),navigator.onLine){if(g&&f){x(!0);try{const{createUserWithEmailAndPassword:r}=await u(async()=>{const{createUserWithEmailAndPassword:l}=await import("./firebase-BHdF2iRg.js").then(n=>n.f);return{createUserWithEmailAndPassword:l}},[]),{doc:L,setDoc:I}=await u(async()=>{const{doc:l,setDoc:n}=await import("./firebase-BHdF2iRg.js").then(O=>O.e);return{doc:l,setDoc:n}},[]),{getAuth:F}=await u(async()=>{const{getAuth:l}=await import("./firebase-BHdF2iRg.js").then(n=>n.f);return{getAuth:l}},[]),w=F($),k=await z(),M=(await r(w,a.email,a.password)).user;await I(L(k,"pending-users",M.uid),{name:E,email:a.email,createdAt:new Date}),await w.signOut(),s(!0),i("تم استلام البيانات، سيتم تنشيط الحساب لاحقاً"),setTimeout(()=>{N("/login")},3e3)}catch(r){console.log(`signup error : ${r}`),r.code==="auth/email-already-in-use"?(s(!0),i("هذا البريد تم التسجيل به من قبل")):r.code==="auth/invalid-email"?(s(!0),i("هذا البريد غير صالح")):r.code==="auth/network-request-failed"&&(s(!0),i("فشل الإتصال بالشبكة"))}finally{x(!1)}}}else s(!0),i("عذراً لا يوجد اتصال بالانترنت")};return e.jsxs("div",{className:"signup px-5 pt-10 pb-5 rounded flex flex-col gap-5 items-center bg-cyan-500 w-[min(98%,550px)]  absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 [direction:rtl]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mb-5 text-title-color",children:"أدمن جديد"}),e.jsxs("form",{onSubmit:D,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(c,{type:"text",value:a.fName,onChange:S,label:"الاسم الأول"}),e.jsx(c,{type:"text",value:a.lName,onChange:V,label:"الاسم الثاني"})]}),e.jsx(c,{id:"email",label:"البريد الإكتروني",type:"email",value:a.email,onChange:C,error:m.emailValid,errorMsg:"الرجاء كتابة بريد الكتروني صالح"}),e.jsxs(c,{id:"passowrd",type:p?"text":"password",value:a.password,label:"كلمة المرور",onChange:A,error:m.passwordValid,errorMsg:" كلمة المرور التي أدخلتها غير صالحة",children:[e.jsx("div",{className:"absolute left-2 top-3 cursor-pointer",onClick:_,children:p?e.jsx(W,{size:20}):e.jsx(q,{size:20})}),e.jsxs("div",{className:"text-sm text-gray-900 self-start",children:[e.jsx("p",{children:"*يجب أن تكون كلمة السر أكثر من 12 حرف"}),e.jsx("p",{children:"*يجب أن تحتوي كلمة السر على :"}),e.jsx("ul",{children:e.jsx("li",{children:"رموز خاصة مثل @-#-!-?"})})]})]}),e.jsx("button",{type:"submit",disabled:h,className:`bg-gray-500 text-white hover:text-bg2-color hover:bg-p-color/80 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold ${h&&"opacity-50"}`,children:"تسجيل"})]}),e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx("p",{children:"هل لديك حساب مسبقاً ؟"}),e.jsx(T,{to:"/login",children:e.jsx("button",{className:"bg-gray-700 text-black hover:text-white hover:bg-gray-950 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer",children:"تسجيل دخول"})})]}),v&&e.jsx(U,{closePopupError:P,msg:y})]})}export{Y as default};
